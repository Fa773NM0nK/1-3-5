(function($){$(document).on('ready',function(){app.init()});var app={needToSave:false,init:function(){app.startSaveTimer();app.captureKeyupEvents();$('#app__clear').on('click',function(e){e.preventDefault();app.clear()});$('.app__input').on('focus',function(){$(this).parents('.app__section').addClass('focused')});$('.app__input').on('blur',function(){$(this).parents('.app__section').removeClass('focused')});app.load()},clear:function(){$('.app__input').each(function(i){$(this).val("");$.localStorage($(this).attr('id'),null)});$.localStorage('lastSaved',null);app.setDateDisplay(false)},startSaveTimer:function(){setInterval(function(){if(app.needToSave){app.save()}},2000)},load:function(){$('.app__input').each(function(i){$(this).val($.localStorage($(this).attr('id')))});app.setDateDisplay($.localStorage('lastSaved'))},save:function(){$('.app__input').each(function(i){$.localStorage($(this).attr('id'),$(this).val())});var d=new Date();app.setDateDisplay(d.toISOString());$.localStorage('lastSaved',d.toISOString());app.needToSave=false},setDateDisplay:function(date){if(!date){$('.app__date .date').html("").attr('title','');return}$('.app__date .date').attr('title',date).timeago()},captureKeyupEvents:function(){$('.app__input').on('keyup',function(e){app.needToSave=true})}}}(jQuery));